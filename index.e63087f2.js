const addEventBtn=document.querySelector(".add-new-event");addEventBtn.addEventListener("click",(()=>{document.querySelector(".modal").style.display="flex"}));const closeModalBtn=document.querySelector(".leave-modal");closeModalBtn.addEventListener("click",(()=>{document.querySelector(".modal").style.display="none",removeAdditionalDates()}));const addDateBtn=document.querySelector(".add-new-date-button");addDateBtn.addEventListener("click",addAdditionalDate);const submitFormBtn=document.querySelector(".submit-form");function addAdditionalDate(){const e=document.querySelector(".event-dates"),t=document.createElement("div");t.classList.add("additional-date");const n=document.createElement("input");n.setAttribute("type","date");const o=document.createElement("span");o.classList.add("delete-date"),o.addEventListener("click",(()=>{dateDiv=o.parentNode,document.querySelector(".event-dates").removeChild(dateDiv)})),o.innerText="Ã—",t.appendChild(n),t.appendChild(o),e.appendChild(t)}function removeAdditionalDates(){const e=document.querySelectorAll(".additional-date");for(const t of e)document.querySelector(".event-dates").removeChild(t)}function addEvent(){const e=document.querySelector(".event-form"),t=e.querySelectorAll('input[type="date"]');let n=[];for(const e of t)n.push(e.value);const o={name:e.name.value,dates:n,author:e.author.value,description:e.description.value};fetch("http://localhost:3000/api/events/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((e=>{"string.empty"===e[0].type&&alert("All input fields must be completed to add an event")})).catch((e=>{console.error("Error:",e)}));document.querySelector(".modal").style.display="none",removeAdditionalDates()}function attendanceAdd(e){e.preventDefault();let t=[];const n=e.target.parentNode,o=n.querySelectorAll(".radio-buttons");for(const e of o){const n=e.getElementsByTagName("input"),o=n[0].name;let d;n[0].checked?d=!0:n[1].checked&&(d=!1);const a={date:o,available:d};t.push(a)}const d={name:n.name.value,dates:t},a=e.target.id;fetch("http://localhost:3000/api/events/"+a+"/attend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then((e=>e.json())).then((e=>{alert(e[0].message)})).catch((e=>{console.error("Error:",e)}))}function editEvent(e){e.target.innerText="Finish edit";const t=e.target.id;let n;const o=document.querySelectorAll("article");for(const e of o)e.id===t&&(n=e);const d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("name","modifyEvent"),d.setAttribute("placeholder","Name of event");const a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("name","modifyDescription"),a.setAttribute("placeholder","Description");const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("name","modifyAuthor"),i.setAttribute("placeholder","Your name"),n.querySelector(".title").replaceWith(d),n.querySelector(".description").replaceWith(a),n.querySelector(".author").replaceWith(i),e.target.removeEventListener("click",editEvent),e.target.addEventListener("click",(()=>{finishEdit(e,n,t)}))}function finishEdit(e,t,n){const o=t.querySelector('input[name="modifyEvent"]').value,d=t.querySelector('input[name="modifyDescription"]').value,a={name:o,author:t.querySelector('input[name="modifyAuthor"]').value,description:d};fetch("http://localhost:3000/api/events/"+n,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{"string.empty"===e[0].type&&alert("All input fields must be completed to finish editing the event")})).catch((e=>{console.error("Error:",e)})),e.target.removeEventListener("click",(()=>{finishEdit(e,t,n)}))}function deleteEvent(e){const t=e.target.id;fetch("http://localhost:3000/api/events/"+t,{method:"DELETE"})}submitFormBtn.addEventListener("click",addEvent);
//# sourceMappingURL=index.e63087f2.js.map
