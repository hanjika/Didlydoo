function e(n){n.target.innerText="Finish edit";const o=n.target.id;let a;const d=document.querySelectorAll("article");for(const e of d)e.id===o&&(a=e);const r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("name","modifyEvent"),r.setAttribute("placeholder","Name of event");const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("name","modifyDescription"),c.setAttribute("placeholder","Description");const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("name","modifyAuthor"),i.setAttribute("placeholder","Your name"),a.querySelector(".title").replaceWith(r),a.querySelector(".description").replaceWith(c),a.querySelector(".author").replaceWith(i),n.target.removeEventListener("click",e),n.target.addEventListener("click",(()=>{t(n,a,o)}))}function t(e,n,o){const a=n.querySelector('input[name="modifyEvent"]').value,d=n.querySelector('input[name="modifyDescription"]').value,r={name:a,author:n.querySelector('input[name="modifyAuthor"]').value,description:d};let c=!0;fetch("http://localhost:3000/api/events/"+o,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>e.json())).then((e=>{e[0].message&&(alert(e[0].message),c=!1)})).catch((e=>{console.error("Error:",e)})),!0===c&&(e.target.removeEventListener("click",(()=>{t(e,n,o)})),window.location.reload())}function n(e){const t=e.target.id;fetch("http://localhost:3000/api/events/"+t,{method:"DELETE"}).then((e=>e.json())).then((e=>{window.location.reload()})).catch((e=>{console.error("Error:",e)}))}function o(e){e.preventDefault();let t=[];const n=e.target.parentNode,o=n.querySelectorAll(".radio-buttons");for(const e of o){const n=e.getElementsByTagName("input"),o=n[0].name;let a;n[0].checked?a=!0:n[1].checked&&(a=!1);const d={date:o,available:a};t.push(d)}const a={name:n.name.value,dates:t},d=e.target.id;fetch("http://localhost:3000/api/events/"+d+"/attend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{alert(e[0].message)})).catch((e=>{console.error("Error:",e)})),window.location.reload()}document.querySelector(".add-new-event").addEventListener("click",(()=>{document.querySelector(".modal").style.display="flex"}));document.querySelector(".leave-modal").addEventListener("click",(()=>{document.querySelector(".modal").style.display="none",removeAdditionalDates()}));document.querySelector(".add-new-date-button").addEventListener("click",(function(){const e=document.querySelector(".event-dates"),t=document.createElement("div");t.classList.add("additional-date");const n=document.createElement("input");n.setAttribute("type","date");const o=document.createElement("span");o.classList.add("delete-date"),o.addEventListener("click",(()=>{dateDiv=o.parentNode,document.querySelector(".event-dates").removeChild(dateDiv)})),o.innerText="Ã—",t.appendChild(n),t.appendChild(o),e.appendChild(t)}));document.querySelector(".submit-form").addEventListener("click",(function(){const e=document.querySelector(".event-form"),t=e.querySelectorAll('input[type="date"]');let n=[];for(const e of t)n.push(e.value);const o={name:e.name.value,dates:n,author:e.author.value,description:e.description.value};fetch("http://localhost:3000/api/events/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((e=>{alert(e[0].message)})).catch((e=>{console.error("Error:",e)})),document.querySelector(".modal").style.display="none",function(){const e=document.querySelectorAll(".additional-date");for(const t of e)document.querySelector(".event-dates").removeChild(t)}(),window.location.reload()}));document.querySelector("main");const a=document.querySelector(".eventSection");document.querySelector(".events"),document.querySelector(".guests");fetch("http://localhost:3000/api/events/").then((e=>e.json())).then((t=>{for(const f of t){var d=document.createElement("article");d.setAttribute("id",f.id),a.appendChild(d);var r=document.createElement("div");r.setAttribute("class","event-title");var c=document.createElement("h3");c.classList.add("title"),c.innerHTML=f.name;var i=document.createElement("button");i.innerText="Edit event",i.classList.add("edit-event-button"),i.setAttribute("id",f.id),i.addEventListener("click",e);var l=document.createElement("button");l.innerText="Delete event",l.classList.add("delete-event-button"),l.setAttribute("id",f.id),l.addEventListener("click",n),r.appendChild(c),r.appendChild(i),r.appendChild(l),d.appendChild(r);var s=document.createElement("p");s.classList.add("description"),s.innerHTML=f.description,d.appendChild(s);var u=document.createElement("p");u.classList.add("author"),u.innerHTML="Posted by "+f.author,d.appendChild(u);var m=document.createElement("section");m.setAttribute("class","dates"),d.appendChild(m);var p=document.createElement("section");p.setAttribute("class","guests"),m.appendChild(p);var h=document.createElement("p");p.appendChild(h);for(const e of f.dates[0].attendees){var v=document.createElement("p");v.innerHTML=e.name,p.appendChild(v)}for(const e of f.dates){const t=document.createElement("section");t.setAttribute("class","date-info"),m.appendChild(t);var y=document.createElement("p");y.innerHTML=new Date(e.date).toLocaleDateString(),t.appendChild(y);for(const n of e.attendees){var b=document.createElement("p");1==n.available&&(b.innerHTML="V",b.classList.add("true")),0==n.available&&(b.innerHTML="X",b.classList.add("false")),t.appendChild(b)}}const t=document.createElement("form");t.classList.add("form-attend");const E=document.createElement("input");E.setAttribute("type","text"),E.setAttribute("name","name"),E.setAttribute("placeholder","Your name"),E.required=!0,t.appendChild(E);for(const e of f.dates){const n=document.createElement("div");n.classList.add("radio-buttons");const o=document.createElement("input");o.setAttribute("type","radio"),o.setAttribute("id","yes"+e.date+f.id),o.setAttribute("value","yes"),o.setAttribute("name",e.date),o.required=!0;const a=document.createElement("label");a.setAttribute("for","yes"+e.date+f.id),a.innerText="V";const d=document.createElement("input");d.setAttribute("type","radio"),d.setAttribute("id","no"+e.date+f.id),d.setAttribute("value","no"),d.setAttribute("name",e.date);const r=document.createElement("label");r.setAttribute("for","no"+e.date+f.id),r.innerText="X",n.appendChild(o),n.appendChild(a),n.appendChild(d),n.appendChild(r),t.appendChild(n)}const A=document.createElement("button");A.innerText="+",A.classList.add("attendance-button"),A.setAttribute("id",f.id),A.addEventListener("click",o),d.appendChild(t),t.appendChild(A)}}));
//# sourceMappingURL=index.c954330a.js.map
